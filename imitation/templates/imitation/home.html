{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}

{% block css %}
{% endblock %}

{% block content %}
<div class="row m-auto d-flex justify-content-between align-items-start mt-3">
  {% include 'imitation/activebar.html' %}
  {% if incident_list %}
  <div class="col-xl-9 col-md-7 p-4 shadow-lg blur bg-transparent border border-light border-opacity-75 d-flex flex-column">
    <div id="order_list">
      {% include 'imitation/incident_list.html' %}
    </div>
    {% if update %}
      <div hx-get="{% url 'imitation:incident_list' %}" hx-target="#order_list" hx-trigger="every 1s"></div>
      <div hx-get="{% url 'imitation:incident_stat' %}" hx-target="#stat" hx-trigger="every 10s"></div>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}

{% block javascript %}
<script type="text/javascript">
	document.body.addEventListener('htmx:configRequest', (event) => {
		event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
	})
</script>
{% endblock %}

